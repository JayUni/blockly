// Do not edit this file; automatically generated by build.py.
'use strict';


Blockly.Skoolbot=new Blockly.Generator("Skoolbot");Blockly.Skoolbot.addReservedWords("_,__inext,assert,bit,colors,colours,coroutine,disk,dofile,error,fs,fetfenv,getmetatable,gps,help,io,ipairs,keys,loadfile,loadstring,math,native,next,os,paintutils,pairs,parallel,pcall,peripheral,print,printError,rawequal,rawget,rawset,read,rednet,redstone,rs,select,setfenv,setmetatable,sleep,string,table,term,textutils,tonumber,tostring,turtle,type,unpack,vector,write,xpcall,_VERSION,__indext,HTTP,and,break,do,else,elseif,end,false,for,function,if,in,local,nil,not,or,repeat,return,then,true,until,while,add,sub,mul,div,mod,pow,unm,concat,len,eq,lt,le,index,newindex,call,assert,collectgarbage,dofile,error,_G,getmetatable,inpairs,load,loadfile,next,pairs,pcall,print,rawequal,rawget,rawlen,rawset,select,setmetatable,tonumber,tostring,type,_VERSION,xpcall,require,package,string,table,math,bit32,io,file,os,debug");
Blockly.Skoolbot.ORDER_ATOMIC=0;Blockly.Skoolbot.ORDER_HIGH=1;Blockly.Skoolbot.ORDER_EXPONENTIATION=2;Blockly.Skoolbot.ORDER_UNARY=3;Blockly.Skoolbot.ORDER_MULTIPLICATIVE=4;Blockly.Skoolbot.ORDER_ADDITIVE=5;Blockly.Skoolbot.ORDER_CONCATENATION=6;Blockly.Skoolbot.ORDER_RELATIONAL=7;Blockly.Skoolbot.ORDER_AND=8;Blockly.Skoolbot.ORDER_OR=9;Blockly.Skoolbot.ORDER_NONE=99;
Blockly.Skoolbot.init=function(a){Blockly.Skoolbot.definitions_=Object.create(null);Blockly.Skoolbot.functionNames_=Object.create(null);Blockly.Skoolbot.variableDB_?Blockly.Skoolbot.variableDB_.reset():Blockly.Skoolbot.variableDB_=new Blockly.Names(Blockly.Skoolbot.RESERVED_WORDS_);Blockly.Skoolbot.variableDB_.setVariableMap(a.getVariableMap())};
Blockly.Skoolbot.finish=function(a){var b=[],c;for(c in Blockly.Skoolbot.definitions_)b.push(Blockly.Skoolbot.definitions_[c]);delete Blockly.Skoolbot.definitions_;delete Blockly.Skoolbot.functionNames_;Blockly.Skoolbot.variableDB_.reset();return b.join("\n\n")+"\n\n\n"+a};Blockly.Skoolbot.scrubNakedValue=function(a){return a+"\n"};Blockly.Skoolbot.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+a+"'"};
Blockly.Skoolbot.scrub_=function(a,b,c){var d="";if(!a.outputConnection||!a.outputConnection.targetConnection){var e=a.getCommentText();(e=Blockly.utils.wrap(e,Blockly.Skoolbot.COMMENT_WRAP-3))&&(d+=Blockly.Skoolbot.prefixLines(e,"-- ")+"\n");for(var f=0;f<a.inputList.length;f++)a.inputList[f].type==Blockly.INPUT_VALUE&&(e=a.inputList[f].connection.targetBlock())&&(e=Blockly.Skoolbot.allNestedComments(e))&&(d+=Blockly.Skoolbot.prefixLines(e,"-- "))}a=a.nextConnection&&a.nextConnection.targetBlock();
c=c?"":Blockly.Skoolbot.blockToCode(a);return d+b+c};Blockly.Skoolbot.colour={};Blockly.Skoolbot.colour_picker=function(a){return['{"colour": '+('"'+a.getFieldValue("COLOUR")+'"')+"}",Blockly.Skoolbot.ORDER_ATOMIC]};Blockly.Skoolbot.colour_random=function(a){return['{"colour": '+('"#'+(16777215*Math.random()<<0).toString(16)+'"')+"}",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.colour_rgb=function(a){var b=parseInt(Blockly.Skoolbot.valueToCode(a,"RED",Blockly.Skoolbot.ORDER_NONE).split(":")[1])||0,c=parseInt(Blockly.Skoolbot.valueToCode(a,"GREEN",Blockly.Skoolbot.ORDER_NONE).split(":")[1])||0,d=parseInt(Blockly.Skoolbot.valueToCode(a,"BLUE",Blockly.Skoolbot.ORDER_NONE).split(":")[1])||0;b=Math.floor(2.55*Math.min(100,Math.max(0,b))+.5).toString(16);c=Math.floor(2.55*Math.min(100,Math.max(0,c))+.5).toString(16);d=Math.floor(2.55*Math.min(100,Math.max(0,d))+
.5).toString(16);a='{"colourRGB": ""#';b=[b,c,d];for(var e in b)a=1==b[e].length?a+("0"+b[e]):a+b[e];return[a+'"}',Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.colour_blend=function(a){var b=Blockly.Skoolbot.valueToCode(a,"COLOUR1",Blockly.Skoolbot.ORDER_NONE).split(":")[1].replace(/\s|}/g,"")||'"#000000"',c=Blockly.Skoolbot.valueToCode(a,"COLOUR2",Blockly.Skoolbot.ORDER_NONE).split(":")[1].replace(/\s|}/g,"")||'"#000000"';a=parseFloat(Blockly.Skoolbot.valueToCode(a,"RATIO",Blockly.Skoolbot.ORDER_NONE).split(":")[1])||0;var d=parseInt(b.substring(2,3),16),e=parseInt(c.substring(2,3),16),f=parseInt(b.substring(4,5),16),g=parseInt(c.substring(4,
5),16);b=parseInt(b.substring(6,7),16);c=parseInt(c.substring(6,7),16);a=Math.min(1,Math.max(0,a));d=Math.floor(d*(1-a)+e*a+.5).toString(16);f=Math.floor(f*(1-a)+g*a+.5).toString(16);g=Math.floor(b*(1-a)+c*a+.5).toString(16);a='{"colourBlend": "#';f=[d,f,g];for(var h in f)a=1==f[h].length?a+("0"+f[h]):a+f[h];return[a+'"}',Blockly.Skoolbot.ORDER_HIGH]};Blockly.Skoolbot.lists={};Blockly.Skoolbot.lists_create_empty=function(a){return["{}",Blockly.Skoolbot.ORDER_ATOMIC]};Blockly.Skoolbot.lists_create_with=function(a){for(var b=Array(a.itemCount_),c=0;c<a.itemCount_;c++)b[c]=Blockly.Skoolbot.valueToCode(a,"ADD"+c,Blockly.Skoolbot.ORDER_NONE)||"None";return["{"+b.join(", ")+"}",Blockly.Skoolbot.ORDER_ATOMIC]};
Blockly.Skoolbot.lists_repeat=function(a){var b=Blockly.Skoolbot.provideFunction_("create_list_repeated",["function "+Blockly.Skoolbot.FUNCTION_NAME_PLACEHOLDER_+"(item, count)","  local t = {}","  for i = 1, count do","    table.insert(t, item)","  end","  return t","end"]),c=Blockly.Skoolbot.valueToCode(a,"ITEM",Blockly.Skoolbot.ORDER_NONE)||"None";a=Blockly.Skoolbot.valueToCode(a,"NUM",Blockly.Skoolbot.ORDER_NONE)||"0";return[b+"("+c+", "+a+")",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.lists_length=function(a){return["#"+(Blockly.Skoolbot.valueToCode(a,"VALUE",Blockly.Skoolbot.ORDER_UNARY)||"{}"),Blockly.Skoolbot.ORDER_UNARY]};Blockly.Skoolbot.lists_isEmpty=function(a){return["#"+(Blockly.Skoolbot.valueToCode(a,"VALUE",Blockly.Skoolbot.ORDER_UNARY)||"{}")+" == 0",Blockly.Skoolbot.ORDER_RELATIONAL]};
Blockly.Skoolbot.lists_indexOf=function(a){var b=Blockly.Skoolbot.valueToCode(a,"FIND",Blockly.Skoolbot.ORDER_NONE)||"''",c=Blockly.Skoolbot.valueToCode(a,"VALUE",Blockly.Skoolbot.ORDER_NONE)||"{}";return[("FIRST"==a.getFieldValue("END")?Blockly.Skoolbot.provideFunction_("first_index",["function "+Blockly.Skoolbot.FUNCTION_NAME_PLACEHOLDER_+"(t, elem)","  for k, v in ipairs(t) do","    if v == elem then","      return k","    end","  end","  return 0","end"]):Blockly.Skoolbot.provideFunction_("last_index",
["function "+Blockly.Skoolbot.FUNCTION_NAME_PLACEHOLDER_+"(t, elem)","  for i = #t, 1, -1 do","    if t[i] == elem then","      return i","    end","  end","  return 0","end"]))+"("+c+", "+b+")",Blockly.Skoolbot.ORDER_HIGH]};Blockly.Skoolbot.lists.getIndex_=function(a,b,c){return"FIRST"==b?"1":"FROM_END"==b?"#"+a+" + 1 - "+c:"LAST"==b?"#"+a:"RANDOM"==b?"math.random(#"+a+")":c};
Blockly.Skoolbot.lists_getIndex=function(a){var b=a.getFieldValue("MODE")||"GET",c=a.getFieldValue("WHERE")||"FROM_START",d=Blockly.Skoolbot.valueToCode(a,"VALUE",Blockly.Skoolbot.ORDER_HIGH)||"{}",e=Blockly.Skoolbot.lists.getIndex_;if("LAST"!=c&&"FROM_END"!=c&&"RANDOM"!=c||d.match(/^\w+$/)){f="GET"==b&&"FROM_END"==c?Blockly.Skoolbot.ORDER_ADDITIVE:Blockly.Skoolbot.ORDER_NONE;a=Blockly.Skoolbot.valueToCode(a,"AT",f)||"1";a=e(d,c,a);if("GET"==b)return[d+"["+a+"]",Blockly.Skoolbot.ORDER_HIGH];c="table.remove("+
d+", "+a+")";return"GET_REMOVE"==b?[c,Blockly.Skoolbot.ORDER_HIGH]:c+"\n"}if("REMOVE"==b){var f="FROM_END"==c?Blockly.Skoolbot.ORDER_ADDITIVE:Blockly.Skoolbot.ORDER_NONE;a=Blockly.Skoolbot.valueToCode(a,"AT",f)||"1";b=Blockly.Skoolbot.variableDB_.getDistinctName("tmp_list",Blockly.Variables.NAME_TYPE);a=e(b,c,a);return b+" = "+d+"\ntable.remove("+b+", "+a+")\n"}a=Blockly.Skoolbot.valueToCode(a,"AT",Blockly.Skoolbot.ORDER_NONE)||"1";return[("GET"==b?Blockly.Skoolbot.provideFunction_("list_get_"+c.toLowerCase(),
["function "+Blockly.Skoolbot.FUNCTION_NAME_PLACEHOLDER_+"(t"+("FROM_END"==c||"FROM_START"==c?", at)":")"),"  return t["+e("t",c,"at")+"]","end"]):Blockly.Skoolbot.provideFunction_("list_remove_"+c.toLowerCase(),["function "+Blockly.Skoolbot.FUNCTION_NAME_PLACEHOLDER_+"(t"+("FROM_END"==c||"FROM_START"==c?", at)":")"),"  return table.remove(t, "+e("t",c,"at")+")","end"]))+"("+d+("FROM_END"==c||"FROM_START"==c?", "+a:"")+")",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.lists_setIndex=function(a){var b=Blockly.Skoolbot.valueToCode(a,"LIST",Blockly.Skoolbot.ORDER_HIGH)||"{}",c=a.getFieldValue("MODE")||"SET",d=a.getFieldValue("WHERE")||"FROM_START",e=Blockly.Skoolbot.valueToCode(a,"AT",Blockly.Skoolbot.ORDER_ADDITIVE)||"1";a=Blockly.Skoolbot.valueToCode(a,"TO",Blockly.Skoolbot.ORDER_NONE)||"None";var f=Blockly.Skoolbot.lists.getIndex_,g="";if(("LAST"==d||"FROM_END"==d||"RANDOM"==d)&&!b.match(/^\w+$/)){var h=Blockly.Skoolbot.variableDB_.getDistinctName("tmp_list",
Blockly.Variables.NAME_TYPE);g=h+" = "+b+"\n";b=h}g="SET"==c?g+(b+"["+f(b,d,e)+"] = "+a):g+("table.insert("+b+", "+(f(b,d,e)+("LAST"==d?" + 1":""))+", "+a+")");return g+"\n"};
Blockly.Skoolbot.lists_getSublist=function(a){var b=Blockly.Skoolbot.valueToCode(a,"LIST",Blockly.Skoolbot.ORDER_NONE)||"{}",c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2"),e=Blockly.Skoolbot.valueToCode(a,"AT1",Blockly.Skoolbot.ORDER_NONE)||"1";a=Blockly.Skoolbot.valueToCode(a,"AT2",Blockly.Skoolbot.ORDER_NONE)||"1";var f=Blockly.Skoolbot.lists.getIndex_;return[Blockly.Skoolbot.provideFunction_("list_sublist_"+c.toLowerCase()+"_"+d.toLowerCase(),["function "+Blockly.Skoolbot.FUNCTION_NAME_PLACEHOLDER_+
"(source"+("FROM_END"==c||"FROM_START"==c?", at1":"")+("FROM_END"==d||"FROM_START"==d?", at2":"")+")","  local t = {}","  local start = "+f("source",c,"at1"),"  local finish = "+f("source",d,"at2"),"  for i = start, finish do","    table.insert(t, source[i])","  end","  return t","end"])+"("+b+("FROM_END"==c||"FROM_START"==c?", "+e:"")+("FROM_END"==d||"FROM_START"==d?", "+a:"")+")",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.lists_sort=function(a){var b=Blockly.Skoolbot.valueToCode(a,"LIST",Blockly.Skoolbot.ORDER_NONE)||"{}",c="1"===a.getFieldValue("DIRECTION")?1:-1;a=a.getFieldValue("TYPE");return[Blockly.Skoolbot.provideFunction_("list_sort",["function "+Blockly.Skoolbot.FUNCTION_NAME_PLACEHOLDER_+"(list, typev, direction)","  local t = {}","  for n,v in pairs(list) do table.insert(t, v) end","  local compareFuncs = {","    NUMERIC = function(a, b)","      return (tonumber(tostring(a)) or 0)","          < (tonumber(tostring(b)) or 0) end,",
"    TEXT = function(a, b)","      return tostring(a) < tostring(b) end,","    IGNORE_CASE = function(a, b)","      return string.lower(tostring(a)) < string.lower(tostring(b)) end","  }","  local compareTemp = compareFuncs[typev]","  local compare = compareTemp","  if direction == -1","  then compare = function(a, b) return compareTemp(b, a) end","  end","  table.sort(t, compare)","  return t","end"])+"("+b+',"'+a+'", '+c+")",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.lists_split=function(a){var b=Blockly.Skoolbot.valueToCode(a,"INPUT",Blockly.Skoolbot.ORDER_NONE),c=Blockly.Skoolbot.valueToCode(a,"DELIM",Blockly.Skoolbot.ORDER_NONE)||"''";a=a.getFieldValue("MODE");if("SPLIT"==a)b||(b="''"),a=Blockly.Skoolbot.provideFunction_("list_string_split",["function "+Blockly.Skoolbot.FUNCTION_NAME_PLACEHOLDER_+"(input, delim)","  local t = {}","  local pos = 1","  while true do","    next_delim = string.find(input, delim, pos)","    if next_delim == nil then",
"      table.insert(t, string.sub(input, pos))","      break","    else","      table.insert(t, string.sub(input, pos, next_delim-1))","      pos = next_delim + #delim","    end","  end","  return t","end"]);else if("JOIN"==a)b||(b="{}"),a="table.concat";else throw Error("Unknown mode: "+a);return[a+"("+b+", "+c+")",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.lists_reverse=function(a){a=Blockly.Skoolbot.valueToCode(a,"LIST",Blockly.Skoolbot.ORDER_NONE)||"{}";Blockly.Skoolbot.provideFunction_("list_reverse",["function "+Blockly.Skoolbot.FUNCTION_NAME_PLACEHOLDER_+"(input)","  local reversed = {}","  for i = #input, 1, -1 do","    table.insert(reversed, input[i])","  end","  return reversed","end"]);return["list_reverse("+a+")",Blockly.Skoolbot.ORDER_HIGH]};Blockly.Skoolbot.logic={};
Blockly.Skoolbot.controls_if=function(a){var b=0,c='{\n"statement": "';do{var d=Blockly.Skoolbot.valueToCode(a,"IF"+b,Blockly.Skoolbot.ORDER_NONE)||"false";var e=Blockly.Skoolbot.statementToCode(a,"DO"+b);c=0<b?c+('{\n"statement": "else if", "condition": '+d+', "branchCode":'+e):c+('if", "condition": '+d+', "branchCode":'+e);++b}while(a.getInput("IF"+b));a.getInput("ELSE")&&(e=Blockly.Skoolbot.statementToCode(a,"ELSE"),c+=',\n}\n{\n"statement": "else", "branchCode":'+e);return c+"}\n"};
Blockly.Skoolbot.controls_ifelse=Blockly.Skoolbot.controls_if;
Blockly.Skoolbot.logic_compare=function(a){var b={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[a.getFieldValue("OP")],c=Blockly.Skoolbot.valueToCode(a,"A",Blockly.Skoolbot.ORDER_RELATIONAL)||"0",d=Blockly.Skoolbot.valueToCode(a,"B",Blockly.Skoolbot.ORDER_RELATIONAL)||"0";return['{ \n"operator": "'+b+'", \n"result": '+{EQ:function(a,b){return a==b},NEQ:function(a,b){return a!=b},LT:function(a,b){return a<b},LTE:function(a,b){return a<=b},GT:function(a,b){return a>b},GTE:function(a,b){return a>=
b}}[a.getFieldValue("OP")](c,d)+"\n}",Blockly.Skoolbot.ORDER_RELATIONAL]};Blockly.Skoolbot.logic_operation=function(a){var b="AND"==a.getFieldValue("OP")?"and":"or",c="and"==b?Blockly.Skoolbot.ORDER_AND:Blockly.Skoolbot.ORDER_OR,d=Blockly.Skoolbot.valueToCode(a,"A",c);a=Blockly.Skoolbot.valueToCode(a,"B",c);if(d||a){var e="and"==b?"true":"false";d||(d=e);a||(a=e)}else a=d="false";d="true"==d;a="true"==a;e=d&&a;"or"==b&&(e=d||a);return['{ \n"operator": "'+b+'", \n"result": '+(e+"\n}"),c]};
Blockly.Skoolbot.logic_negate=function(a){return['{ \n"operator": "negate", \n"result": '+("true"!=(Blockly.Skoolbot.valueToCode(a,"BOOL",Blockly.Skoolbot.ORDER_UNARY)||"true"))+"\n}\n",Blockly.Skoolbot.ORDER_UNARY]};Blockly.Skoolbot.logic_boolean=function(a){return['{\n"boolean": '+("TRUE"==a.getFieldValue("BOOL")?"true":"false")+"\n}",Blockly.Skoolbot.ORDER_ATOMIC]};Blockly.Skoolbot.logic_null=function(a){return['{\n"null": null\n}',Blockly.Skoolbot.ORDER_ATOMIC]};
Blockly.Skoolbot.logic_ternary=function(a){var b=Blockly.Skoolbot.valueToCode(a,"IF",Blockly.Skoolbot.ORDER_OR)||"false",c=Blockly.Skoolbot.valueToCode(a,"THEN",Blockly.Skoolbot.ORDER_OR)||"nil";a=Blockly.Skoolbot.valueToCode(a,"ELSE",Blockly.Skoolbot.ORDER_OR)||"nil";return['{\n"statement": "if", \n"condition": '+b+',\n"branchTrue": "'+c+'",\n"branchFalse": "'+a+'"\n}',Blockly.Skoolbot.ORDER_OR]};Blockly.Skoolbot.loops={};Blockly.Skoolbot.CONTINUE_STATEMENT="goto continue\n";Blockly.Skoolbot.addContinueLabel=function(a){return-1<a.indexOf(Blockly.Skoolbot.CONTINUE_STATEMENT)?a+Blockly.Skoolbot.INDENT+"::continue::\n":a};
Blockly.Skoolbot.controls_repeat=function(a){var b=parseInt(a.getFieldValue("TIMES"),10);a=Blockly.Skoolbot.statementToCode(a,"DO")||'""\n';a=Blockly.Skoolbot.addContinueLabel(a);Blockly.Skoolbot.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE);return'{\n\t"loop_style": "controls_repeat",\n\t"repeat_times": '+b+',\n\t"branch": '+a+"\n}"};
Blockly.Skoolbot.controls_repeat_ext=function(a){var b=Blockly.Skoolbot.valueToCode(a,"TIMES",Blockly.Skoolbot.ORDER_NONE)||"0";b=Blockly.isNumber(b)?parseInt(b,10):'{\n\t\t"operator": "math.floor", \n\t\t"argument": '+b+"\n\t}";a=Blockly.Skoolbot.statementToCode(a,"DO")||'""\n';a=Blockly.Skoolbot.addContinueLabel(a);Blockly.Skoolbot.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE);return'{\n\t"loop_style": "controls_repeat_ext",\n\t"repeat_times": '+b+',\n\t"branch": '+a+"\n}"};
Blockly.Skoolbot.controls_whileUntil=function(a){var b="UNTIL"==a.getFieldValue("MODE"),c=Blockly.Skoolbot.valueToCode(a,"BOOL",b?Blockly.Skoolbot.ORDER_UNARY:Blockly.Skoolbot.ORDER_NONE)||'"false"',d=Blockly.Skoolbot.statementToCode(a,"DO")||'""\n';d=Blockly.Skoolbot.addLoopTrap(d,a.id);d=Blockly.Skoolbot.addContinueLabel(d);return'{\n\t"loop_style": "controls_whileUntil",\n\t"repeat_condition": '+c+',\n\t"end_type": '+(b?'"until"':'"while"')+',\n\t"branch": '+d+"\n}"};
Blockly.Skoolbot.controls_for=function(a){var b=Blockly.Skoolbot.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),c=Blockly.Skoolbot.valueToCode(a,"FROM",Blockly.Skoolbot.ORDER_NONE)||"0",d=Blockly.Skoolbot.valueToCode(a,"TO",Blockly.Skoolbot.ORDER_NONE)||"0",e=Blockly.Skoolbot.valueToCode(a,"BY",Blockly.Skoolbot.ORDER_NONE)||"1",f=Blockly.Skoolbot.statementToCode(a,"DO")||'""\n';f=Blockly.Skoolbot.addLoopTrap(f,a.id);f=Blockly.Skoolbot.addContinueLabel(f);return'\n{\n\t"loop_style": "controls_for",\n\t"variable": "'+
b+'",\n\t"start": '+c+',\n\t"end": '+d+',\n\t"step": '+e+',\n\t"branch": '+f+"\n}"};Blockly.Skoolbot.controls_forEach=function(a){var b=Blockly.Skoolbot.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),c=Blockly.Skoolbot.valueToCode(a,"LIST",Blockly.Skoolbot.ORDER_NONE)||"{}";a=Blockly.Skoolbot.statementToCode(a,"DO")||'""\n';a=Blockly.Skoolbot.addContinueLabel(a);return'{\n\t"loop_style": "controls_forEach",\n\t"variable": "'+b+'",\n\t"list": '+c+',\n\t"branch": '+a+"\n}"};
Blockly.Skoolbot.controls_flow_statements=function(a){switch(a.getFieldValue("FLOW")){case "BREAK":return'{ "controls_flow_statements": "break" }\n';case "CONTINUE":return'{ "controls_flow_statements": "continue" }\n'}throw Error("Unknown flow statement.");};Blockly.Skoolbot.math={};Blockly.Skoolbot.math_number=function(a){a=parseFloat(a.getFieldValue("NUM"));return['{ "number": '+a+" }",0>a?Blockly.Skoolbot.ORDER_UNARY:Blockly.Skoolbot.ORDER_ATOMIC]};
Blockly.Skoolbot.math_arithmetic=function(a){var b={ADD:[" + ",Blockly.Skoolbot.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Skoolbot.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Skoolbot.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Skoolbot.ORDER_MULTIPLICATIVE],POWER:[" ^ ",Blockly.Skoolbot.ORDER_EXPONENTIATION]}[a.getFieldValue("OP")],c=b[0];b=b[1];var d=Blockly.Skoolbot.valueToCode(a,"A",b)||"0";a=Blockly.Skoolbot.valueToCode(a,"B",b)||"0";return['{ "operator": "'+c+'", "argument":['+d+","+a+"]}",b]};
Blockly.Skoolbot.math_single=function(a){var b=a.getFieldValue("OP");if("NEG"==b)return a=Blockly.Skoolbot.valueToCode(a,"NUM",Blockly.Skoolbot.ORDER_UNARY)||"0",['{ "operator": "neg" ,"argument":'+a+"}",Blockly.Skoolbot.ORDER_UNARY];if("POW10"==b)return a=Blockly.Skoolbot.valueToCode(a,"NUM",Blockly.Skoolbot.ORDER_EXPONENTIATION)||"0",['{ "operator": "pow10" ,"argument":'+a+"}",Blockly.Skoolbot.ORDER_EXPONENTIATION];a="ROUND"==b?Blockly.Skoolbot.valueToCode(a,"NUM",Blockly.Skoolbot.ORDER_ADDITIVE)||
"0":Blockly.Skoolbot.valueToCode(a,"NUM",Blockly.Skoolbot.ORDER_NONE)||"0";switch(b){case "ABS":b='{ "operator": "math.abs","argument":'+a+"}";break;case "ROOT":b='{ "operator": "math.sqrt","argument":'+a+"}";break;case "LN":b='{ "operator": "math.log","argument":'+a+"}";break;case "LOG10":b='{ "operator": "math.log","argument":['+a+', { "number": 10 }]}';break;case "EXP":b='{ "operator": "math.exp","argument":'+a+"}";break;case "ROUND":b='{ "operator": "math.floor","argument": { "operator": "+", "argument":['+
a+', { "number": 0.5 }]}}';break;case "ROUNDUP":b='{ "operator": "math.ceil","argument":'+a+"}";break;case "ROUNDDOWN":b='{ "operator": "math.floor","argument":'+a+"}";break;case "SIN":b='{ "operator": "math.sin" , "argument": { "operator": "math.rad","argument":'+a+"}}";break;case "COS":b='{ "operator": "math.cos" , "argument": { "operator": "math.rad","argument":'+a+"}}";break;case "TAN":b='{ "operator": "math.tan" , "argument": { "operator": "math.rad","argument":'+a+"}}";break;case "ASIN":b='{ "operator": "math.deg" , "argument": { "operator": "math.asin","argument":'+
a+"}}";break;case "ACOS":b='{ "operator": "math.deg" , "argument": { "operator": "math.acos","argument":'+a+"}}";break;case "ATAN":b='{ "operator": "math.deg" , "argument": { "operator": "math.atan","argument":'+a+"}}";break;default:throw Error("Unknown math operator: "+b);}return[b,Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.math_constant=function(a){return{PI:['{ "operator": "math.pi"}',Blockly.Skoolbot.ORDER_HIGH],E:['{ "operator": "math.exp", "argument": { "number": 1}}',Blockly.Skoolbot.ORDER_HIGH],GOLDEN_RATIO:['{ "operator": "+", "argument": [{ "number": 1} , { "operator": "/", "argument":[{ "operator": "math.sqrt", "argument":{ "number": 5}} , { "number": 2}]}]}',Blockly.Skoolbot.ORDER_MULTIPLICATIVE],SQRT2:['{ "operator": "math.sqrt", "argument": { "number": 2}}',Blockly.Skoolbot.ORDER_HIGH],
SQRT1_2:['{ "operator": "math.sqrt", "argument": { "number": 0.5}}',Blockly.Skoolbot.ORDER_HIGH],INFINITY:['{ "operator": "math.huge"}',Blockly.Skoolbot.ORDER_HIGH]}[a.getFieldValue("CONSTANT")]};
Blockly.Skoolbot.math_number_property=function(a){var b=Blockly.Skoolbot.valueToCode(a,"NUMBER_TO_CHECK",Blockly.Skoolbot.ORDER_MULTIPLICATIVE)||"0",c=a.getFieldValue("PROPERTY");if("PRIME"==c)return['{ "functionName": "math_isPrime", "argument": '+b+"}",Blockly.Skoolbot.ORDER_HIGH];switch(c){case "EVEN":var d='{ "functionName": "math_isEven", "argument": '+b+"}";break;case "ODD":d='{ "functionName": "math_isOdd", "argument": '+b+"}";break;case "WHOLE":d='{ "functionName": "math_isWhole", "argument": '+
b+"}";break;case "POSITIVE":d='{ "functionName": "math_isPositive", "argument": '+b+"}";break;case "NEGATIVE":d='{ "functionName": "math_isNegative", "argument": '+b+"}";break;case "DIVISIBLE_BY":a=Blockly.Skoolbot.valueToCode(a,"DIVISOR",Blockly.Skoolbot.ORDER_MULTIPLICATIVE);if(!a||"0"==a)return['{"result": "nil"}',Blockly.Skoolbot.ORDER_ATOMIC];d='{ "operator": "%", "argument":['+b+","+a+"]}"}return[d,Blockly.Skoolbot.ORDER_RELATIONAL]};
Blockly.Skoolbot.math_change=function(a){var b=Blockly.Skoolbot.valueToCode(a,"DELTA",Blockly.Skoolbot.ORDER_ADDITIVE)||"0";return'{ "functionName": "math_change", "argument": ['+Blockly.Skoolbot.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+", "+b+"]}"};Blockly.Skoolbot.math_round=Blockly.Skoolbot.math_single;Blockly.Skoolbot.math_trig=Blockly.Skoolbot.math_single;
Blockly.Skoolbot.math_on_list=function(a){var b=a.getFieldValue("OP");a=Blockly.Skoolbot.valueToCode(a,"LIST",Blockly.Skoolbot.ORDER_NONE)||"{}";switch(b){case "SUM":b='"math_sum"';break;case "MIN":b='"math_min"';break;case "AVERAGE":b='"math_average"';break;case "MAX":b='"math_max"';break;case "MEDIAN":b='"math_median"';break;case "MODE":b='"math_modes"';break;case "STD_DEV":b='"math_standard_deviation"';break;default:throw Error("Unknown operator: "+b);}return['{ "functionName": '+b+', "argument": '+
a+"}",Blockly.Skoolbot.ORDER_HIGH]};Blockly.Skoolbot.math_modulo=function(a){var b=Blockly.Skoolbot.valueToCode(a,"DIVIDEND",Blockly.Skoolbot.ORDER_MULTIPLICATIVE)||"0";a=Blockly.Skoolbot.valueToCode(a,"DIVISOR",Blockly.Skoolbot.ORDER_MULTIPLICATIVE)||"0";return['{ "operator": "%", "argument":['+b+","+a+"]}",Blockly.Skoolbot.ORDER_MULTIPLICATIVE]};
Blockly.Skoolbot.math_constrain=function(a){var b=Blockly.Skoolbot.valueToCode(a,"VALUE",Blockly.Skoolbot.ORDER_NONE)||"0",c=Blockly.Skoolbot.valueToCode(a,"LOW",Blockly.Skoolbot.ORDER_NONE)||"-math.huge";a=Blockly.Skoolbot.valueToCode(a,"HIGH",Blockly.Skoolbot.ORDER_NONE)||"math.huge";return["math.min(math.max("+b+", "+c+"), "+a+")",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.math_random_int=function(a){var b=Blockly.Skoolbot.valueToCode(a,"FROM",Blockly.Skoolbot.ORDER_NONE)||"0";a=Blockly.Skoolbot.valueToCode(a,"TO",Blockly.Skoolbot.ORDER_NONE)||"0";return['{ "functionName": "math_random_int", "argument": ['+b+", "+a+"]}",Blockly.Skoolbot.ORDER_HIGH]};Blockly.Skoolbot.math_random_float=function(a){return['{ "functionName": "math_random_float"}',Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.math_atan2=function(a){var b=Blockly.Skoolbot.valueToCode(a,"X",Blockly.Skoolbot.ORDER_NONE)||"0";a=Blockly.Skoolbot.valueToCode(a,"Y",Blockly.Skoolbot.ORDER_NONE)||"0";return['{ "operator": "math.deg" , "argument": { "operator": "math.atan2","argument":['+b+","+a+"]}}",Blockly.Skoolbot.ORDER_HIGH]};Blockly.Skoolbot.procedures={};
Blockly.Skoolbot.procedures_defreturn=function(a){var b=Blockly.Skoolbot.variableDB_.getName(a.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),c=Blockly.Skoolbot.statementToCode(a,"STACK");if(Blockly.Skoolbot.STATEMENT_PREFIX){var d=a.id.replace(/\$/g,"$$$$");c=Blockly.Skoolbot.prefixLines(Blockly.Skoolbot.STATEMENT_PREFIX.replace(/%1/g,"'"+d+"'"),Blockly.Skoolbot.INDENT)+c}Blockly.Skoolbot.INFINITE_LOOP_TRAP&&(c=Blockly.Skoolbot.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+a.id+"'")+c);(d=Blockly.Skoolbot.valueToCode(a,
"RETURN",Blockly.Skoolbot.ORDER_NONE)||"")?d=Blockly.Skoolbot.INDENT+"return "+d+"\n":c||(c="");for(var e=[],f=0;f<a.arguments_.length;f++)e[f]=Blockly.Skoolbot.variableDB_.getName(a.arguments_[f],Blockly.Variables.NAME_TYPE);c="function "+b+"("+e.join(", ")+")\n"+c+d+"end\n";c=Blockly.Skoolbot.scrub_(a,c);Blockly.Skoolbot.definitions_["%"+b]=c;return null};Blockly.Skoolbot.procedures_defnoreturn=Blockly.Skoolbot.procedures_defreturn;
Blockly.Skoolbot.procedures_callreturn=function(a){for(var b=Blockly.Skoolbot.variableDB_.getName(a.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),c=[],d=0;d<a.arguments_.length;d++)c[d]=Blockly.Skoolbot.valueToCode(a,"ARG"+d,Blockly.Skoolbot.ORDER_NONE)||"nil";return[b+"("+c.join(", ")+")",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.procedures_callnoreturn=function(a){for(var b=Blockly.Skoolbot.variableDB_.getName(a.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),c=[],d=0;d<a.arguments_.length;d++)c[d]=Blockly.Skoolbot.valueToCode(a,"ARG"+d,Blockly.Skoolbot.ORDER_NONE)||"nil";return b+"("+c.join(", ")+")\n"};
Blockly.Skoolbot.procedures_ifreturn=function(a){var b="if "+(Blockly.Skoolbot.valueToCode(a,"CONDITION",Blockly.Skoolbot.ORDER_NONE)||"false")+" then\n";a.hasReturnValue_?(a=Blockly.Skoolbot.valueToCode(a,"VALUE",Blockly.Skoolbot.ORDER_NONE)||"nil",b+=Blockly.Skoolbot.INDENT+"return "+a+"\n"):b+=Blockly.Skoolbot.INDENT+"return\n";return b+"end\n"};Blockly.Skoolbot.texts={};Blockly.Skoolbot.text=function(a){return['{ "text": "'+Blockly.Skoolbot.quote_(a.getFieldValue("TEXT"))+'" }',Blockly.Skoolbot.ORDER_ATOMIC]};
Blockly.Skoolbot.text_join=function(a){if(0==a.itemCount_)return['{ "text": "\'\'" }',Blockly.Skoolbot.ORDER_ATOMIC];if(1==a.itemCount_)return[Blockly.Skoolbot.valueToCode(a,"ADD0",Blockly.Skoolbot.ORDER_NONE)||'{ "text": "\'\'" }',Blockly.Skoolbot.ORDER_HIGH];if(2==a.itemCount_){var b=Blockly.Skoolbot.valueToCode(a,"ADD0",Blockly.Skoolbot.ORDER_CONCATENATION)||'{ "text": "\'\'" }';a=Blockly.Skoolbot.valueToCode(a,"ADD1",Blockly.Skoolbot.ORDER_CONCATENATION)||'{ "text": "\'\'" }';return['{ \n\t"functionName": "text_join", \n\t"text_list": ['+
b+", "+a+"]\n}",Blockly.Skoolbot.ORDER_CONCATENATION]}b=[];for(var c=0;c<a.itemCount_;c++)b[c]=Blockly.Skoolbot.valueToCode(a,"ADD"+c,Blockly.Skoolbot.ORDER_NONE)||'{ "text": "\'\'" }';a='{ \n\t"functionName": "text_join", \n\t"text_list": ['+b.join(", ")+"]\n}";return[a,Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.text_append=function(a){var b=Blockly.Skoolbot.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);a=Blockly.Skoolbot.valueToCode(a,"TEXT",Blockly.Skoolbot.ORDER_CONCATENATION)||"''";return'{ \n\t"functionName": "text_append", \n\t"variable": "'+b+'", \n\t"value": '+a+"\n}"};Blockly.Skoolbot.text_length=function(a){return['{ \n\t"functionName": "text_length", \n\t"argument": '+(Blockly.Skoolbot.valueToCode(a,"VALUE",Blockly.Skoolbot.ORDER_UNARY)||"''")+"\n}",Blockly.Skoolbot.ORDER_UNARY]};
Blockly.Skoolbot.text_isEmpty=function(a){return['{ \n\t"functionName": "text_isEmpty", \n\t"argument": '+(Blockly.Skoolbot.valueToCode(a,"VALUE",Blockly.Skoolbot.ORDER_UNARY)||"''")+"\n}",Blockly.Skoolbot.ORDER_RELATIONAL]};
Blockly.Skoolbot.text_indexOf=function(a){var b=Blockly.Skoolbot.valueToCode(a,"FIND",Blockly.Skoolbot.ORDER_NONE)||"''",c=Blockly.Skoolbot.valueToCode(a,"VALUE",Blockly.Skoolbot.ORDER_NONE)||"''";return['{ \n\t"functionName": "'+("FIRST"==a.getFieldValue("END")?"firstIndexOf":"lastIndexOf")+'", \n\t"variable": "'+c+'",\n\t"substring": '+b+"\n}",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.text_charAt=function(a){var b=a.getFieldValue("WHERE")||"FROM_START",c=Blockly.Skoolbot.valueToCode(a,"AT","FROM_END"==b?Blockly.Skoolbot.ORDER_UNARY:Blockly.Skoolbot.ORDER_NONE)||"1";a=Blockly.Skoolbot.valueToCode(a,"VALUE",Blockly.Skoolbot.ORDER_NONE)||"''";if("RANDOM"==b)c='{ \n\t"functionName": "text_random_letter", \n\t"variable": "'+a+'"\n}';else{if("FIRST"==b)c="1",b="fromStart";else if("LAST"==b)c="1",b="fromEnd";else if("FROM_START"==b)b="fromStart";else if("FROM_END"==b)b=
"fromEnd";else throw Error("Unhandled option (text_charAt).");c='{ \n\t"functionName": "text_char_at", \n\t"variable": "'+a+'",\n\t"order": "'+b+'",\n\t"index": '+c+" \n}"}return[c,Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.text_getSubstring=function(a){var b=Blockly.Skoolbot.valueToCode(a,"STRING",Blockly.Skoolbot.ORDER_NONE)||"''",c=a.getFieldValue("WHERE1"),d=Blockly.Skoolbot.valueToCode(a,"AT1","FROM_END"==c?Blockly.Skoolbot.ORDER_UNARY:Blockly.Skoolbot.ORDER_NONE)||"1";var e=JSON.parse(d)||"1";e=e.number||"1";if("FIRST"==c)c=0;else if("FROM_START"==c)c=e-1;else if("FROM_END"==c)c=-e;else throw Error("Unhandled option (text_getSubstring)");d=a.getFieldValue("WHERE2");a=Blockly.Skoolbot.valueToCode(a,
"AT2","FROM_END"==d?Blockly.Skoolbot.ORDER_UNARY:Blockly.Skoolbot.ORDER_NONE)||"1";e=JSON.parse(a)||"1";e=e.number||"1";if("LAST"==d)a=0;else if("FROM_START"==d)a=e-1;else if("FROM_END"==d)a=-e;else throw Error("Unhandled option (text_getSubstring)");return['{ \n\t"functionName": "text_getSubstring", \n\t"variable": "'+b+'",\n\t"start_index": '+c+',\n\t"end_index": '+a+"\n}",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.text_changeCase=function(a){var b=a.getFieldValue("CASE");a=Blockly.Skoolbot.valueToCode(a,"TEXT",Blockly.Skoolbot.ORDER_NONE)||"''";if("UPPERCASE"==b)var c="text_uppercase";else"LOWERCASE"==b?c="text_lowercase":"TITLECASE"==b&&(c="text_titlecase");return['{ \n\t"functionName": "text_changeCase", \n\t"text": "'+a+'", \n\t"change_case_type": "'+c+'"\n}',Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.text_trim=function(a){var b={LEFT:"left",RIGHT:"right",BOTH:"both"}[a.getFieldValue("MODE")];return['{ \n\t"functionName": "text_trim", \n\t"text": '+(Blockly.Skoolbot.valueToCode(a,"TEXT",Blockly.Skoolbot.ORDER_NONE)||"''")+',\n\t"which_side": "'+b+'"\n}',Blockly.Skoolbot.ORDER_HIGH]};Blockly.Skoolbot.text_print=function(a){return'{ \n\t"functionName": "text_print", \n\t"output": '+(Blockly.Skoolbot.valueToCode(a,"TEXT",Blockly.Skoolbot.ORDER_NONE)||"''")+"\n}"};
Blockly.Skoolbot.text_prompt_ext=function(a){var b=a.getField("TEXT")?Blockly.Skoolbot.quote_(a.getFieldValue("TEXT")):Blockly.Skoolbot.valueToCode(a,"TEXT",Blockly.Skoolbot.ORDER_NONE)||"''",c='{ \n\t"functionName": "text_prompt", \n\t"message": '+b+" \n}";"NUMBER"==a.getFieldValue("TYPE")&&(c='{ \n\t"functionName": "text_prompt", \n\t"message": '+('{ \n\t\t"functionName": "text_toNumber", \n\t\t"text": '+b+" \n\ta}")+" \n}");return[c,Blockly.Skoolbot.ORDER_HIGH]};Blockly.Skoolbot.text_prompt=Blockly.Skoolbot.text_prompt_ext;
Blockly.Skoolbot.text_count=function(a){var b=Blockly.Skoolbot.valueToCode(a,"TEXT",Blockly.Skoolbot.ORDER_NONE)||"''";a=Blockly.Skoolbot.valueToCode(a,"SUB",Blockly.Skoolbot.ORDER_NONE)||"''";return['{ \n\t"functionName": "text_count", \n\t"text": '+b+',\n\t"sub": '+a+" \n}",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.text_replace=function(a){var b=Blockly.Skoolbot.valueToCode(a,"TEXT",Blockly.Skoolbot.ORDER_NONE)||"''",c=Blockly.Skoolbot.valueToCode(a,"FROM",Blockly.Skoolbot.ORDER_NONE)||"''";a=Blockly.Skoolbot.valueToCode(a,"TO",Blockly.Skoolbot.ORDER_NONE)||"''";return['{ \n\t"functionName": "text_replace", \n\t"text": '+b+',\n\t"from": '+c+',\n\t"to": '+a+" \n}",Blockly.Skoolbot.ORDER_HIGH]};
Blockly.Skoolbot.text_reverse=function(a){return["string.reverse("+(Blockly.Skoolbot.valueToCode(a,"TEXT",Blockly.Skoolbot.ORDER_HIGH)||"''")+")",Blockly.Skoolbot.ORDER_HIGH]};Blockly.Skoolbot.variables={};Blockly.Skoolbot.variables_get=function(a){return["{ varName: "+Blockly.Skoolbot.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+"}",Blockly.Skoolbot.ORDER_ATOMIC]};Blockly.Skoolbot.variables_set=function(a){var b=Blockly.Skoolbot.valueToCode(a,"VALUE",Blockly.Skoolbot.ORDER_NONE)||"0";return Blockly.Skoolbot.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+b+"\n"};
Blockly.Skoolbot.variablesDynamic={};Blockly.Skoolbot.variables_get_dynamic=Blockly.Skoolbot.variables_get;Blockly.Skoolbot.variables_set_dynamic=Blockly.Skoolbot.variables_set;